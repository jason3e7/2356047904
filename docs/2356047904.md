### 第一次練習
# [2356047904](http://2356047904)
### 就上手

jason3e7 20181213

Note:title:"第一次練習2356047904就上手"

---

## Web developer
### 50
#### 網站有許多漏洞，從底下的登入網址，你認為有幾種方式可以入侵?

* 提示1 : 如何看到網站的原始碼?
* 提示2 : 如何從網站的原始碼看到你所需要的資訊?
* 提示3 : 答案格式 BreakALLCTF{xxxxxxxxxxx}

* 請連結以下網址:
* http://140.110.112.32:1001/

---

## Robots.txt
### 50

* 本題任務是請你找到robots.txt並因此找到flag。
* 提示1 : robots.txt的存放放置
* 提示2 : 相關hex to string及base64 編碼

* 請連結以下網址:
* http://140.110.112.32:2001/

Note:robots.txt是一種文字檔案，它告訴網路搜尋引擎此網站中的哪些內容是不應被搜尋引擎的搜尋到的，哪些是可以被搜尋引擎搜尋到的。 但駭客卻常透過robots.txt來知道哪些網頁目錄含有重要或是隱私資訊。

---

## Curl-1
### 50
#### 網址重新導向(URL redirection)的技術 請到wiki上看看URL redirection的原理及用途 https://zh.wikipedia.org/wiki/ 網域名稱轉址

* 提示1 : 如何從網站的原始碼找到你所需要的資訊?
* 提示2 : 本題可以使用curl工具輕鬆解題

* 請連結以下網址進行解題:
* http://140.110.112.32:2004/

---

## Burp Suite-1
### 50

* 你知道如何使用非管理者身分在設計不良的網站取得管理者權限登入嗎?
* 本題任務是請你完成上述使命?
* 提示1: 你知道如何攔截並修改封包嗎?
* 提示2: 你可以使用Burp Suite等工具

* 請連結以下網址進行解題:
* http://140.110.112.32:2005/

Note:管理者的網站常是駭客最想登入的地方。 要做到權限控管需要小心設計，因為設計不良的網站，常會使駭客攔截封包後修改並送出，進而造成網站機敏內容外洩。

---

## SQL injection
### 50

* 你知道駭客如何使用SQL injection入侵網站嗎?
* 本題任務是請你使用SQL injection登入網站找到flag。

* 請特別注意:別使用TANet IP(學術網路)進行本次解題，會被封鎖!
* 請連結以下網址進行解題:
* http://140.110.112.32:2002

Note:SQL injection(SQL隱碼攻擊)是最最著名的網站漏洞。

---

## SQL injection 心得
* [120.114.62.45](http://120.114.62.45), 不知道是不是 mirror 站.
* 一開始打 120.114.62.45 會一直 timeout, 經過有人提點, 很有可能有 WAF.
* 最後嘗試出來 WAF pattern
  * 'or'x'='x, timeout
  * " or"x"="x, timeout
  * " or "x"="x, timeout

Note:單引號, 雙引號, 什麼時候要用哪個呢 !?

---

## Local File Inclusion
### 100

* LFI(Local File Inclusion，本地文件載入)常是駭客常用的目錄遍歷攻擊(directory traversal attack)。請上網看看他的攻擊技術。

* 本題任務是請你使用LFI找到flag。
* 請連結以下網址進行解題:
* http://140.110.112.32:2003/

Note:flag 位置要猜一段時間, 還要擔心檔名會不會不一樣.

---

## XSS
### 100

* 本題任務是使用XSS攻擊竊取cookie。
* 請使用Firefox瀏覽器較方便解題。

* 提示1 : 取得cookie後請記得做URL decode

* 請連結以下網址:
* http://140.110.112.32:3003/

Note:Cross-site scripting(跨網站指令碼攻擊)又稱XSS攻擊，通常是透過HTML或JavaScript這些不在伺服器端執行的程式進行攻擊，可用來竊取使用者的cookie，甚至於冒用使用者的身份。
* 個人覺得無奈, 也最烏龍的一題. 

---

## Md5 collision
### 100

* 但MD5加密真的安全嗎?近年已發現MD5碰撞(md5 collision)問題。
* 本題任務請你使用md5 collision技術登入取得flag。

* 請連結以下網址:
* http://140.110.112.32:3004/

Note:MD5加密是一種被近年被廣泛使用的密碼雜湊函式，可以產生出一個128位元的雜湊值(hash)，用於確保資訊傳輸完整一致，甚至做為密碼加密用途。 
* [Magic Hashes](https://www.whitehatsec.com/blog/magic-hashes/)

---

## To serialize or Not to serialize
### 200

* 如當傳給unserialize()的參數可控制時，可以蓄意輸入一個惡意構造的序列化字串，從而控制對象內部的參數甚至是函數造成遠端惡意攻擊。

* 請連結以下網址:
* http://140.110.112.32:1009/

Note:php反序列化漏洞，php中有兩個函數serialize()和unserialize()，serialize函數可以將物件轉換成字串，儲存物件的值方便之後的傳遞與使用，unserialize函數能夠將字串轉換回原來的值。

* 直接建立白箱進行測試最快, 創立物件也比較不會寫錯.
* var_dump(urlencode(serialize($input)));
  * serialize, protected, %00

---

## XXE
### 200

* XXE(XML External Entity)漏洞，也被稱為XML外部實體注入攻擊，主要發生在網站解析XML輸入時，沒有禁止外部實體的載入進而造成的安全漏洞。
* 觀察完程式碼後，請使用XXE Attack找出flag。

* 請連結以下網址:
* http://140.110.112.32:1010/

Note:
* OWASP在2017年提出最新版，其中包含了 A4-XML External Entities(XXE)
詳情請至 : https://www.owasp.org/index.php/Top_10-2017_Top_10
* 請問你是否對XXE已了解?

---

## XXE 心得
* 建立白箱環境要注意有些版本已經沒有這個弱點, 沒想到環境好難建. (failed)
* XML 語法的不熟悉.
* reference
  * [XML External Entity (XXE) limitations](https://www.acunetix.com/blog/articles/xml-external-entity-xxe-limitations/)
  * [XML External Entity Attacks
(XXE)](https://www.owasp.org/images/5/5d/XML_Exteral_Entity_Attack.pdf)
  * [XML External Entity (XXE) Prevention Cheat Sheet](https://www.owasp.org/index.php/XML_External_Entity_%28XXE%29_Prevention_Cheat_Sheet)
  * [XML External Entity](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/XXE%20injection)

Note:
* 有兩段 code 很有趣.
  * `error_reporting(0);`, 為什麼要加這行呢?
  * `@new SimpleXMLElement($data);`, 為什麼要加 @ 呢?
* [php\_xxe\_tester.php](https://gist.github.com/lukaskuzmiak/c8306a5af855c6faaaee)
* `new SimpleXMLElement($data, LIBXML_NOENT);`

---

## EasyPeasy
### 200

* http://140.110.112.32:4001

Note:
* SQLi
* 偷懶用 sqlmap

---

## EasyPeasy2
### 200

* http://140.110.112.32:4002

Note:
* blind SQLi
* 偷懶用 sqlmap

---

## four-char-inj
### 200

* http://140.110.112.32:4003

Note:
* 在 level1 的 SQL injection, 有做好功課, 這題沒有花太多時間.

---

# The End
